<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRIDAY - AI Assistant</title>
    <link rel="stylesheet" href="src/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <!-- MediaPipe Hands for Hand Tracking -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Main Container -->
    <div class="jarvis-container">
        <!-- Header -->
        <header class="jarvis-header">
            <div class="header-left">
                <div class="jarvis-logo">
                    <div class="logo-arc"></div>
                    <div class="logo-center">F</div>
                </div>
                <div class="header-title">
                    <h1>FRIDAY</h1>
                    <p class="subtitle">Female AI ‚Ä¢ by Dipesh</p>
                </div>
            </div>
            <div class="header-right">
                <div class="language-selector">
                    <select id="language-select" class="language-select" title="Output Language (Auto-selects AI)">
                        <option value="en-US">üá∫üá∏ English (Groq)</option>
                        <option value="ne-NP">üá≥üáµ ‡§®‡•á‡§™‡§æ‡§≤‡•Ä (Gemini)</option>
                        <option value="hi-IN">üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Gemini)</option>
                    </select>
                </div>
                <button class="icon-btn wake-word-btn" id="wake-word-btn" title="Wake Word: Say 'FRIDAY' to activate">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 2a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 2zM10 15a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 15zM10 7a3 3 0 100 6 3 3 0 000-6zM15.657 5.404a.75.75 0 10-1.06-1.06l-1.061 1.06a.75.75 0 001.06 1.061l1.06-1.06zM6.464 14.596a.75.75 0 10-1.06-1.06l-1.06 1.06a.75.75 0 001.06 1.061l1.06-1.061zM18 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0118 10zM5 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 015 10zM14.596 15.657a.75.75 0 001.06-1.06l-1.06-1.061a.75.75 0 10-1.061 1.06l1.06 1.06zM5.404 6.464a.75.75 0 001.06-1.06l-1.06-1.06a.75.75 0 10-1.061 1.06l1.06 1.06z"/>
                    </svg>
                </button>
                <button class="icon-btn hand-tracking-btn" id="gesture-tracking-btn" title="Ultra Gesture Control: Full desktop control">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23,11V19c0,2.21-1.79,4-4,4H15c-1.11,0-2-.89-2-2V11c0-1.11.89-2,2-2h4C20.21,9,22,10.79,22,13v6zM8.5,3C7.67,3,7,3.67,7,4.5v8c0,.83.67,1.5,1.5,1.5S10,13.33,10,12.5v-8C10,3.67,9.33,3,8.5,3zM5.5,5C4.67,5,4,5.67,4,6.5v6c0,.83.67,1.5,1.5,1.5S7,13.33,7,12.5v-6C7,5.67,6.33,5,5.5,5zM11.5,1C10.67,1,10,1.67,10,2.5v10c0,.83.67,1.5,1.5,1.5s1.5-.67,1.5-1.5v-10C13,1.67,12.33,1,11.5,1z"/>
                    </svg>
                </button>
                <button class="icon-btn" id="gesture-calibrate-btn" title="Gesture Calibration" onclick="window.gestureCalibration.showCalibrationModal()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z"/>
                    </svg>
                </button>
                <button class="icon-btn" id="gesture-train-btn" title="Train Custom Gestures" onclick="window.gestureTraining.showTrainingUI()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"/>
                    </svg>
                </button>
                <div class="status-indicator">
                    <span class="status-dot online"></span>
                    <span class="status-text">ONLINE</span>
                </div>
                <button class="icon-btn settings-btn" title="Settings">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 6a4 4 0 100 8 4 4 0 000-8zm-2 4a2 2 0 114 0 2 2 0 01-4 0z"/>
                        <path d="M10 1a1 1 0 011 1v1.07a7.002 7.002 0 014.93 4.93H17a1 1 0 110 2h-1.07a7.002 7.002 0 01-4.93 4.93V17a1 1 0 11-2 0v-1.07a7.002 7.002 0 01-4.93-4.93H3a1 1 0 110-2h1.07a7.002 7.002 0 014.93-4.93V2a1 1 0 011-1z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="jarvis-main">
            <!-- Sidebar -->
            <aside class="jarvis-sidebar">
                <div class="sidebar-header">
                    <h3>CONVERSATIONS</h3>
                    <button class="icon-btn new-chat-btn" title="New Chat">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"/>
                        </svg>
                    </button>
                </div>
                <div class="sidebar-hint">
                    <small style="color: var(--jarvis-text-dim); font-size: 0.75rem; padding: 0 0.5rem;">Double-click to rename</small>
                </div>
                <div class="conversations-list" id="conversations-list">
                    <!-- Conversations will be loaded here -->
                </div>
                
                <button class="delete-all-btn" id="delete-all-chats-btn" title="Delete All Chats">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M6.5 1h3a.5.5 0 01.5.5v1H6v-1a.5.5 0 01.5-.5zM11 2.5v-1A1.5 1.5 0 009.5 0h-3A1.5 1.5 0 005 1.5v1H2.506a.58.58 0 00-.01 0H1.5a.5.5 0 000 1h.538l.853 10.66A2 2 0 004.885 16h6.23a2 2 0 001.994-1.84l.853-10.66h.538a.5.5 0 000-1h-.995a.59.59 0 00-.01 0H11zm1.958 1l-.846 10.58a1 1 0 01-.997.92h-6.23a1 1 0 01-.997-.92L3.042 3.5h9.916z"/>
                    </svg>
                    <span>Delete All Chats</span>
                </button>

                <div class="sidebar-section">
                    <h3>PROJECTS</h3>
                    <button class="icon-btn new-project-btn" title="New Project">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"/>
                        </svg>
                    </button>
                </div>
                <div class="projects-list" id="projects-list">
                    <!-- Projects will be loaded here -->
                </div>

                <div class="sidebar-footer">
                    <button class="icon-btn" onclick="captureScreen()" title="Screenshot & Analyze">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4z"/>
                            <circle cx="10" cy="10" r="2"/>
                        </svg>
                    </button>
                    <button class="icon-btn" onclick="toggleClipboardMonitor()" title="Toggle Clipboard Monitor" id="clipboard-monitor-btn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z"/>
                            <path d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H5a2 2 0 01-2-2V5z"/>
                        </svg>
                    </button>
                    <button class="icon-btn system-info-btn" title="System Info">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                        </svg>
                    </button>
                </div>
            </aside>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" id="mobile-menu-toggle" style="display: none;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                </svg>
            </button>
            
            <!-- Mobile Overlay -->
            <div class="mobile-overlay" id="mobile-overlay"></div>

            <!-- Chat Area -->
            <main class="jarvis-chat">
                <div class="chat-messages" id="chat-messages">
                    <div class="welcome-message">
                        <div class="welcome-logo">
                            <div class="logo-arc-large"></div>
                            <div class="logo-center-large">F</div>
                        </div>
                        <h2>Hello! I'm FRIDAY.</h2>
                        <p>Your intelligent female AI assistant.</p>
                        <p class="developer-credit">Developed by Dipesh</p>
                        
                        <div class="suggestions-container">
                            <button class="suggestion-btn" onclick="useSuggestion('What can you help me with?')">
                                <span class="suggestion-icon">‚ùì</span>
                                <span>What can you help me with?</span>
                            </button>
                            <button class="suggestion-btn" onclick="captureScreen()">
                                <span class="suggestion-icon">üì∏</span>
                                <span>Take a screenshot and analyze</span>
                            </button>
                            <button class="suggestion-btn" onclick="useSuggestion('What\\'s my system status?')">
                                <span class="suggestion-icon">üíª</span>
                                <span>What's my system status?</span>
                            </button>
                            <button class="suggestion-btn" onclick="useSuggestion('Search the web for latest AI news')">
                                <span class="suggestion-icon">üîç</span>
                                <span>Search the web</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="chat-input-container">
                    <div class="input-wrapper">
                        <button class="icon-btn attach-btn" title="Upload File (Image, PDF, Word, Text)">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"/>
                            </svg>
                        </button>
                        <button class="icon-btn voice-btn" id="voice-btn" title="Voice Input (Click to speak)">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"/>
                                <path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"/>
                            </svg>
                        </button>
                        <textarea 
                            id="chat-input" 
                            class="chat-input" 
                            placeholder="Message FRIDAY..."
                            rows="1"
                        ></textarea>
                        <button class="icon-btn voice-output-btn" id="voice-output-btn" title="Toggle Voice Output">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z"/>
                            </svg>
                        </button>
                        <button class="icon-btn stop-speech-btn" id="stop-speech-btn" title="Stop Speaking" style="display: none;">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <rect x="6" y="6" width="8" height="8" rx="1"/>
                            </svg>
                        </button>
                        <button class="icon-btn send-btn" id="send-btn" title="Send Message">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="input-footer">
                        <span class="input-hint">üìé Supports: Images, PDFs, Word, Code files | Press Enter to send</span>
                        <span class="file-indicator" id="file-indicator" style="display: none;"></span>
                    </div>
                </div>
            </main>

            <!-- Info Panel (collapsible) -->
            <aside class="jarvis-info-panel" id="info-panel">
                <div class="info-header">
                    <h3>SYSTEM INFORMATION</h3>
                    <button class="icon-btn close-panel-btn" id="close-panel-btn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>
                        </svg>
                    </button>
                </div>
                <div class="info-content" id="info-content">
                    <div class="stat-card">
                        <h4>CPU</h4>
                        <div class="stat-value" id="cpu-stat">--</div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill" id="cpu-bar"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h4>MEMORY</h4>
                        <div class="stat-value" id="memory-stat">--</div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill" id="memory-bar"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h4>DISK</h4>
                        <div class="stat-value" id="disk-stat">--</div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill" id="disk-bar"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h4>NETWORK</h4>
                        <div class="stat-value" id="network-stat">--</div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Hand Tracking Overlay -->
    <div class="hand-tracking-overlay" id="hand-tracking-overlay" style="display: none;">
        <div class="hand-tracking-container">
            <div class="hand-tracking-header">
                <span>üñêÔ∏è Hand Tracking Active</span>
                <button class="close-hand-tracking" id="close-hand-tracking">‚úï</button>
            </div>
            <div class="hand-tracking-video-wrapper">
                <video id="hand-video" autoplay playsinline></video>
                <canvas id="hand-canvas"></canvas>
                <div class="gesture-indicator" id="gesture-indicator">
                    <span class="gesture-emoji">üëã</span>
                    <span class="gesture-name">No gesture</span>
                </div>
            </div>
            <div class="hand-tracking-gestures">
                <div class="gesture-help">
                    <span>üëã Open Palm</span> ‚Üí Wake FRIDAY
                </div>
                <div class="gesture-help">
                    <span>‚úä Fist</span> ‚Üí Stop speaking
                </div>
                <div class="gesture-help">
                    <span>üëç Thumbs Up</span> ‚Üí New chat
                </div>
                <div class="gesture-help">
                    <span>‚úåÔ∏è Peace Sign</span> ‚Üí Repeat last
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- MediaPipe for Advanced Gesture Tracking -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    
    <!-- Error Handler (load first) -->
    <script type="module" src="/src/error_handler.js"></script>
    
    <!-- Notification System -->
    <script type="module" src="/src/notification_system.js"></script>
    
    <!-- Permission Handler -->
    <script type="module" src="/src/permission_handler.js"></script>
    
    <!-- Streaming TTS Engine -->
    <script type="module" src="/src/streaming_tts.js"></script>
    <!-- Local STT Client -->
    <script type="module" src="/src/local_stt.js"></script>
    
    <!-- Alexa Visual Feedback (Echo Show-like display) -->
    <script type="module" src="/src/alexa_visual_feedback.js"></script>
    
    <!-- Alexa Voice Commands (Timers, Lists, Routines) -->
    <script type="module" src="/src/alexa_voice_commands.js"></script>
    
    <!-- Advanced Wake Word System (Alexa/Siri level) -->
    <script type="module" src="/src/advanced_wake_word.js"></script>
    
    <!-- Enhanced Keyboard Shortcuts -->
    <script type="module" src="/src/enhanced_keyboard_shortcuts.js"></script>
    
    <!-- Gesture Performance Optimizer (Load FIRST) -->
    <script type="module" src="/src/gesture_performance_optimizer.js"></script>
    
    <!-- Ultra Gesture Tracking (Advanced) -->
    <script type="module" src="/src/ultra_gesture_tracking.js"></script>
    
    <!-- Gesture Calibration UI -->
    <script type="module" src="/src/gesture_calibration_ui.js"></script>
    
    <!-- Gesture Overlay UI -->
    <script type="module" src="/src/gesture_overlay_ui.js"></script>
    
    <!-- Gesture Training System -->
    <script type="module" src="/src/gesture_training_system.js"></script>
    
    <!-- Hand Tracking (Original - Fallback) -->
    <script type="module" src="/src/hand_tracking_advanced.js"></script>
    
    <!-- Main App (load last) -->
    <script type="module" src="/src/main.js"></script>
</body>
</html>

